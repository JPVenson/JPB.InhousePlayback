@page "/users"
@inherits SelectUserBase
@using JPB.InhousePlayback.Shared.DbModels
@using Microsoft.AspNetCore.Authorization
@layout MinLayout
@attribute [Authorize]

<div class="container">
	<div class="row">
		<div class="col-12">
			<div class="text-center">
				<h1>Users</h1>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div class="mx-auto">
				@if (ToBeAdded == null)
				{
					<div class="row">
						@foreach (var user in Users)
						{
							<button @onclick="(() => SetUser(user))" class="btn btn-link">
								<div class="card" style="width: 12rem;">
									<img src="https://der-informatiker.ch/wp-content/uploads/2017/09/user-placeholder.jpg" 
									     class="card-img-top" alt="...">
									<div class="card-body">
										<h5 class="card-title">@user.Username</h5>
									</div>
								</div>
							</button>
						}
						
						<button @onclick="(() => ToBeAdded = new User())" class="btn btn-link">
							<div class="card" style="width: 12rem;">
								<img src="https://der-informatiker.ch/wp-content/uploads/2017/09/user-placeholder.jpg" 
								     class="card-img-top" alt="...">
								<div class="card-body">
									<h5 class="card-title">Add New</h5>
								</div>
							</div>
						</button>
					</div>
				}
				else
				{
					<div class="row">
						<div class="form-group row">
							<label for="text" class="col-4 col-form-label">Username</label>
							<div class="col-8">
								<div class="input-group">
									<input id="text" name="text" type="text" class="form-control" @bind-value="ToBeAdded.Username">
								</div>
							</div>
						</div>
						<div class="form-group row">
							<div class="offset-4 col-8">
								<button class="btn btn-primary" @onclick="AddUser">Add</button>
							</div>
						</div>
					</div>
				}
			</div>
		</div>
	</div>
</div>
